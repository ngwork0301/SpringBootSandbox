println "Hello World."
// System.getenv のように引数のない関数のカッコは省略できない
println System.getenv()

// ダブルクォーテーションの文字列内には、シェルっぽく${}で変数を入れられる
def greet = 'Hello'
println "${greet} World!"

// クラスの実装
// Groovy内にはクラスのフィードとメソッドはすべてpublic
class TestClass {
    def hoge = 'abc'

    // フィードアクセスでこれが呼ばれる
    def getHoge() {
        println 'getHoge() called'
        return this.hoge
    }

    // フィードアクセスでこれが呼ばれる
    def setHoge(newHoge) {
        println "setHoge(${newHoge}) called"
        this.hoge = newHoge
    }
    
    def sayHoge() {
        println hoge
    }
}

def test = new TestClass()

println test.hoge
test.hoge = 'cdf'

test.sayHoge()


 // クロージャの実装
 // クロージャは本来は「環境つき関数」だが、
 // Groovyでは「無名関数」「ラムダ」の意味合いも持つ

 // 本来のクロージャ
 def c0 = {
    def local = 1
    return { x -> local += x; println local }
 }

 def closure = c0()
 closure(100) // 101
 closure(100) // 201
 closure(100) // 301
 